<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/header.html :: header">
<meta charset="UTF-8">
<title>edit event</title>

</head>
<body>
<!--<th:block th:include="partials/navbar"/>-->

<nav th:replace="partials/navbar.html :: navbar"></nav>


<h1 th:text="${event.title}"></h1>
<p th:text="${event.description}"></p>
<!--Category: <p th:text="${event.category}"></p>-->

<h1>Edit Event:</h1>
<form th:action="@{|/events/${event.id}/edit|}" th:method="POST">
    <label for="title">title</label>
    <input id="title" type="text" name="title" th:value="${event.title}" placeholder="Enter title">
    <br/>
    <label for="body">Body</label>
    <textarea name="body" id="body" cols="30" rows="10" th:text="${event.description}"
              placeholder="Enter description"></textarea>
    <br/>
    <label for="parentCategory">Edit the category:</label>
    <select name="parentCategory" id="parentCategory">
        <option value="" selected disabled hidden>Categories</option>
        <div th:each="category : ${parentCategories}">
            <option th:value="${category.id}" th:text="${category.category}"></option>
        </div>
    </select>
    <br/>

	<input type="button" value="Add Image(s)" id="pickWatermark" onclick="pickMark()">
	<input type="hidden" name="eventImage" id="eventImage">

	<input value="Update Event" type="submit"/>
</form>

<script th:inline="javascript">
	let client = filestack.init(document.querySelector('meta.fsapi').content);

	function pickMark() {
		client.pick({
			accept: 'image/*',
			maxFiles: 1
		}).then(function (result) {
			document.getElementById("eventImage").value = result.filesUploaded[0].url;
		});
	}
</script>

</body>
</html>